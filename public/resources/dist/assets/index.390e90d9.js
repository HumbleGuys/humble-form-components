const o=({initialData:s={}})=>({formData:{...s},isLoading:!1,async handleSubmit(){if(!this.isLoading){this.isLoading=!0;try{await this.submit()}catch(t){this.handleError(t)}finally{this.isLoading=!1}}},async submit(){this.$dispatch("beforesubmit");const t=this.$el.action,a=this.$el.method;this.formData.submitted_from=window.location.href,await fetch(t,{method:a,headers:{"Content-Type":"application/json"},body:JSON.stringify(this.formData)}).then(i=>i.json()).then(i=>{this.$dispatch("success",i),this.clearForm()}).catch(i=>{this.handleError(i)})},handleError(t){this.$dispatch("error",t)},clearForm(){this.formData={...s}}});document.addEventListener("alpine:init",()=>{window.Alpine.data("form",o)});
